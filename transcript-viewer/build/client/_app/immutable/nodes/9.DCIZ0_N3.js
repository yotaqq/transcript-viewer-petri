import"../chunks/CWj6FrbW.js";import{e as M,f as c,g as z,i as m,j as G,t as d,s as _,k as s,m as t,$ as J,J as x,r as o,n as W}from"../chunks/DDSnUQRm.js";import{s as b}from"../chunks/Cw2wGIIF.js";import{i as j}from"../chunks/Cufvb6Zw.js";import{e as q,i as D}from"../chunks/ZS3-Rmiz.js";import{s as T}from"../chunks/BfFtub1s.js";import{s as E,a as K}from"../chunks/DjMDWNJ7.js";import{p as N,a as O}from"../chunks/CMjXfWsx.js";import{T as Q}from"../chunks/D55lYjHU.js";var X=c('<span class="font-mono text-xs font-semibold"> </span>'),Y=c('<a class="font-mono text-xs transition-colors"> </a>'),Z=c("<li><!></li>"),aa=c('<div class="p-4"><div class="alert alert-error max-w-2xl mx-auto"><svg xmlns="http://www.w3.org/2000/svg" class="stroke-current shrink-0 h-6 w-6" fill="none" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg> <span> </span> <div><a href="/" class="btn btn-sm">Go Home</a></div></div></div>'),ea=c('<div class="min-h-screen bg-base-100"><div class="navbar bg-base-200"><div class="flex-1"><div class="breadcrumbs text-sm"><ul><li><a href="/" class="font-mono text-xs">Home</a></li> <!></ul></div></div></div> <main class="py-6"><!></main></div>');function ma(U,V){M(V,!0);const[F,R]=E(),S=()=>K(O,"$page",F);let l=x(()=>{const a=S().params.path;if(!a)return"";const r=Array.isArray(a)?a:a.split("/").filter(Boolean);try{console.log("Parsing URL segments:",r);const e=N(r);return console.log("Parsed file path:",e),e}catch(e){return console.error("Failed to parse URL path:",e),console.error("Segments were:",r),""}}),A=x(()=>{if(!t(l))return[];const a=t(l).split("/"),r=[];for(let e=0;e<a.length;e++){const n=a[e],p=e===a.length-1&&n.endsWith(".json");let u=a.slice(0,e+1).join("/");r.push({name:n,path:u,isFile:p,isClickable:!p&&e>0})}return r}),w=x(()=>t(l)?"":"Invalid transcript path");var h=ea();z(a=>{d(()=>J.title=t(l)?`${t(l)} - Petri Transcript Viewer`:"Petri Transcript Viewer")});var f=s(h),P=s(f),$=s(P),k=s($),B=_(s(k),2);q(B,17,()=>t(A),D,(a,r)=>{var e=Z(),n=s(e);{var p=v=>{var i=X(),g=s(i,!0);o(i),d(()=>b(g,t(r).name)),m(v,i)},u=v=>{var i=Y(),g=s(i,!0);o(i),d(L=>{T(i,"href",`/?path=${L??""}`),T(i,"title",`View directory: ${t(r).path??""}`),b(g,t(r).name)},[()=>encodeURIComponent(t(r).path)]),m(v,i)};j(n,v=>{t(r).isFile?v(p):v(u,!1)})}o(e),m(a,e)}),o(k),o($),o(P),o(f);var y=_(f,2),C=s(y);{var H=a=>{var r=aa(),e=s(r),n=_(s(e),2),p=s(n,!0);o(n),W(2),o(e),o(r),d(()=>b(p,t(w))),m(a,r)},I=a=>{Q(a,{get filePath(){return t(l)}})};j(C,a=>{t(w)?a(H):a(I,!1)})}o(y),o(h),m(U,h),G(),R()}export{ma as component};
