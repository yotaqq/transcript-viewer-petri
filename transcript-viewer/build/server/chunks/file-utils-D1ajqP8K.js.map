{"version":3,"file":"file-utils-D1ajqP8K.js","sources":["../../../.svelte-kit/adapter-node/chunks/file-utils.js"],"sourcesContent":["import { J as getContext } from \"./index.js\";\nimport \"./client.js\";\nconst getStores = () => {\n  const stores$1 = getContext(\"__svelte__\");\n  return {\n    /** @type {typeof page} */\n    page: {\n      subscribe: stores$1.page.subscribe\n    },\n    /** @type {typeof navigating} */\n    navigating: {\n      subscribe: stores$1.navigating.subscribe\n    },\n    /** @type {typeof updated} */\n    updated: stores$1.updated\n  };\n};\nconst page = {\n  subscribe(fn) {\n    const store = getStores().page;\n    return store.subscribe(fn);\n  }\n};\nfunction toPosixPath(p) {\n  return p.replace(/\\\\/g, \"/\");\n}\nfunction buildTranscriptUrl(relativePath) {\n  const safe = toPosixPath(relativePath || \"\");\n  const segments = safe.split(\"/\").filter(Boolean).map(encodeURIComponent);\n  return `/transcript/${segments.join(\"/\")}`;\n}\nfunction normalizeClientFilePath(p) {\n  if (!p) return null;\n  return toPosixPath(p);\n}\nfunction parseUrlPath(pathSegments) {\n  if (!pathSegments || pathSegments.length === 0) {\n    throw new Error(\"Invalid path: empty path segments\");\n  }\n  const decodedSegments = pathSegments.map((segment) => {\n    try {\n      return decodeURIComponent(segment);\n    } catch (error) {\n      throw new Error(`Invalid URL encoding in path segment: ${segment}`);\n    }\n  });\n  const filePath = decodedSegments.join(\"/\");\n  if (!filePath || !filePath.endsWith(\".json\")) {\n    throw new Error(`Invalid file path: ${filePath}`);\n  }\n  if (filePath.startsWith(\"/\")) {\n    throw new Error(\"Invalid file path: must be relative, not absolute\");\n  }\n  if (filePath.includes(\"../\")) {\n    throw new Error(\"Invalid file path: directory traversal is not allowed\");\n  }\n  const lastSlash = filePath.lastIndexOf(\"/\");\n  const filename = lastSlash >= 0 ? filePath.slice(lastSlash + 1) : filePath;\n  if (!filename.startsWith(\"transcript_\")) {\n    throw new Error('Invalid file path: filename must start with \"transcript_\"');\n  }\n  return filePath;\n}\nexport {\n  parseUrlPath as a,\n  buildTranscriptUrl as b,\n  normalizeClientFilePath as n,\n  page as p\n};\n"],"names":[],"mappings":"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"}