{"version":3,"file":"transcript.svelte-BEaYfmNG.js","sources":["../../../.svelte-kit/adapter-node/chunks/transcript.svelte.js"],"sourcesContent":["import \"clsx\";\nfunction createTranscriptLoader(filePath) {\n  let metadata = null;\n  let transcript = null;\n  let metadataLoading = false;\n  let transcriptLoading = false;\n  let metadataError = null;\n  let transcriptError = null;\n  const loadMetadata = async () => {\n    if (metadata) return metadata;\n    metadataLoading = true;\n    metadataError = null;\n    try {\n      const url = `/api/transcripts?filePath=${encodeURIComponent(filePath)}&metadataOnly=true`;\n      const response = await fetch(url);\n      if (!response.ok) {\n        if (response.status === 404) {\n          metadataError = `Transcript at \"${filePath}\" not found`;\n        } else {\n          let details = \"\";\n          try {\n            const errJson = await response.clone().json();\n            details = errJson?.message || errJson?.error || \"\";\n          } catch {\n            try {\n              details = await response.text();\n            } catch {\n            }\n          }\n          const extra = details ? ` - ${details}` : \"\";\n          throw new Error(`Failed to load metadata: ${response.status} ${response.statusText}${extra}`);\n        }\n        return null;\n      }\n      const result = await response.json();\n      if (result.success) {\n        metadata = result.data;\n        return metadata;\n      } else {\n        throw new Error(result.error || \"Unknown API error\");\n      }\n    } catch (err) {\n      metadataError = err instanceof Error ? err.message : \"Unknown error loading metadata\";\n      return null;\n    } finally {\n      metadataLoading = false;\n    }\n  };\n  const loadTranscript = async () => {\n    if (transcript) return transcript;\n    transcriptLoading = true;\n    transcriptError = null;\n    try {\n      const url = `/api/transcripts?filePath=${encodeURIComponent(filePath)}`;\n      const response = await fetch(url);\n      if (!response.ok) {\n        if (response.status === 404) {\n          transcriptError = `Transcript at \"${filePath}\" not found`;\n        } else {\n          let details = \"\";\n          try {\n            const errJson = await response.clone().json();\n            details = errJson?.message || errJson?.error || \"\";\n          } catch {\n            try {\n              details = await response.text();\n            } catch {\n            }\n          }\n          const extra = details ? ` - ${details}` : \"\";\n          throw new Error(`Failed to load transcript: ${response.status} ${response.statusText}${extra}`);\n        }\n        return null;\n      }\n      const result = await response.json();\n      if (result.success) {\n        transcript = result.data;\n        if (!metadata && transcript && \"transcript\" in transcript && transcript.transcript?.metadata) {\n          metadata = transcript.transcript.metadata;\n        }\n        return transcript;\n      } else {\n        throw new Error(result.error || \"Unknown API error\");\n      }\n    } catch (err) {\n      transcriptError = err instanceof Error ? err.message : \"Unknown error loading transcript\";\n      return null;\n    } finally {\n      transcriptLoading = false;\n    }\n  };\n  const reset = () => {\n    metadata = null;\n    transcript = null;\n    metadataLoading = false;\n    transcriptLoading = false;\n    metadataError = null;\n    transcriptError = null;\n  };\n  return {\n    // Reactive getters\n    get metadata() {\n      return metadata;\n    },\n    get transcript() {\n      return transcript;\n    },\n    get metadataLoading() {\n      return metadataLoading;\n    },\n    get transcriptLoading() {\n      return transcriptLoading;\n    },\n    get metadataError() {\n      return metadataError;\n    },\n    get transcriptError() {\n      return transcriptError;\n    },\n    get hasMetadata() {\n      return metadata !== null;\n    },\n    get hasTranscript() {\n      return transcript !== null;\n    },\n    get isLoading() {\n      return metadataLoading || transcriptLoading;\n    },\n    get hasError() {\n      return metadataError !== null || transcriptError !== null;\n    },\n    // Actions\n    loadMetadata,\n    loadTranscript,\n    reset,\n    // Convenience method to load both if needed\n    loadBoth: async () => {\n      await loadMetadata();\n      await loadTranscript();\n    }\n  };\n}\nexport {\n  createTranscriptLoader as c\n};\n"],"names":[],"mappings":"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"}